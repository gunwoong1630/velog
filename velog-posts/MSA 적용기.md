<p>토이 프로젝트를 진행하다 MSA를 공부하는 과정에서 정리하면 좋을 것 같아 이와같이 정리한다.</p>
<h2 id="msa-개념-및-장단점">MSA 개념 및 장단점</h2>
<p>마이크로서비스 아키텍처(MSA, Microservices Architecture)는 애플리케이션을 <strong>여러 개의 독립적인 서비스로 분할</strong>하여 개발, 배포, 운영하는 방식이다.</p>
<p>모놀리식 아키텍처와 대조적으로 하나의 애플리케이션을 여러 모듈로 나눠진 구조라 생각하면 편하다.</p>
<h3 id="장점">장점</h3>
<ol>
<li>독립적인 배포와 확장성</li>
<li>기술 스택의 다양성 : 각 모듈마다 서비스에 적합한 기술 스택을 적용할 수 있다. 예를 들어, 기본적으로 Spring을 사용하되 인공지능에 적합한 파이썬 모듈을 사용할 수 있는 것이다.</li>
<li>개발 및 유지보수 용이성 : 애초에 각 서비스마다 모듈로 나눠놨기 때문에 모놀리식 아키텍처에서 하나의 프로젝트에서 여러 기능이 있는 것에 비해 코드를 이해하고 유지 보수하기 편하다.</li>
<li>고가용성과 장애 격리 : 모놀리식 아키텍처에서 하나의 모듈이 문제가 발생할 경우 해당 애플리케이션이 전체적으로 막히지만, MSA처럼 모듈로 나눠 진행하게 되면 부분적으로 오류가 생기게 됨으로 다른 서비스는 정상적으로 운영할 수 있다.</li>
</ol>
<h3 id="단점">단점</h3>
<ol>
<li>복잡한 아키텍처 : 모놀리식 아키텍처에는 하나의 프로젝트에 다 넣었기 때문에 구조가 비교적 단순한 방면, MSA는 여러 모듈로 나누고 어떤 모듈에서 다른 모듈의 데이터가 필요할 경우 해당 부분도 생각해줘야하기 때문에 복잡해진다.</li>
</ol>
<h2 id="구조-소개">구조 소개</h2>
<p><img alt="" src="https://velog.velcdn.com/images/gwj0421/post/2d0029cd-13dc-41d1-a38e-ea35654597a0/image.png" /></p>
<p>해당 구조는 MSA의 예제로 많이 사용되는 예시 그림이다. </p>
<p>MSA는 여러 모듈로 나눈다고 했으니 하나의 애플리케이션에서 여러 모듈이 존재하는데, 하나의 모듈이 다른 모듈에게 데이터를 요청할 때 주소가 필요하다. 왜냐하면 Get이난 Post같은 방식으로 HTTP 요청하기 때문이다. 하지만 일일이 모듈을 설정해줄수 없는 노릇임으로 이러한 주소를 자동으로 배정할 수 있도록 하는 것이 바로 Service Discovery이다. Service Discovery가 애플리케이션에 있는 모듈의 주소를 갖고 있어서 어떤 모듈이 다른 모듈의 주소값을 알고 싶으면 Service Discovery에게 물어보면 Service Discvoery가 알려준다.</p>
<p>여러 모듈이 있는데 클라이언트 요청에 따라 일일이 연결해줘야 될까? 답은 아니다. 클라이언트의 요청에 따라 어떻게 작동해야되는 수문장 역할을 하는 것이 바로 Api Gateway이다.</p>
<p>사진에서도 보면 모바일이나 브라우저에서 요청이 들어올 경우 우선 Api Gateway를 통과한다. Api Gateway는 말그대로 수문장이라서 어디로 가야하는지, 들어와도 되는 것인지 판단한다. 이렇게 통과하게 되면 마찬가지로 Service Discovery에게 요청하여 주소를 찾아 결국 내가 접근하고자 하는 모듈에 접근할 수 있게 된다.</p>
<p>하나의 모듈에는 하나의 인스턴스만 있는게 아니라 요구량에 따라 여러 인스턴스가 있을 수 있다. 이와같이 어떤 인스턴스가 바쁜경우 다른 인스턴스로 작동을 하도록 하는 것이 바로 로드 밸런싱이다.</p>
<p>이렇게 MSA 구조의 가장 기본이 되는 것만 보았다. 이후에 자세한 내용은 다음에...</p>